---
phase: 27-developer-manual
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/developer_manual.md
autonomous: true

must_haves:
  truths:
    - "A new developer can create a Python venv, install dependencies, and configure .env by following the documented steps"
    - "A new developer can run all four test suites using the documented commands and understand expected output"
    - "The dev manual references the operations guide for detailed setup instead of duplicating it"
    - "Dev-specific details (Vite proxy, watch mode, hot reload, Redis optional for local) are documented"
  artifacts:
    - path: "docs/developer_manual.md"
      provides: "Developer manual with TOC, Quick Start, Environment Setup, Running Tests sections"
      contains: "## Quick Start"
  key_links:
    - from: "docs/developer_manual.md"
      to: "docs/operations_guide.md"
      via: "cross-reference links for detailed setup"
      pattern: "operations_guide\\.md"
---

<objective>
Create the developer manual file with the first half of content: table of contents, quick start, environment setup, and running tests.

Purpose: Enable a new developer to get the application running and verify all test suites pass within their first hour. This plan creates the file and covers DEV-01 through DEV-08.
Output: `docs/developer_manual.md` with ~280 lines covering setup and testing.
</objective>

<execution_context>
@/Users/Daniel.Tehan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/Daniel.Tehan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-developer-manual/27-RESEARCH.md

# Source material for environment setup and testing
@docs/operations_guide.md
@CLAUDE.md
@lineage-ui/README.md
@lineage-api/README.md
@database/README.md
@.env.example
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create developer manual with TOC, Quick Start, and Environment Setup</name>
  <files>docs/developer_manual.md</files>
  <action>
Create `docs/developer_manual.md` with the following structure:

**Header and TOC:**
- Title: "# Developer Manual"
- Brief intro: "This manual enables a new developer to set up a local environment, run all test suites, understand the architecture, and contribute code."
- Related docs links: operations guide, user guide, SECURITY.md (same pattern as ops guide header)
- Table of Contents with all planned sections (including ones filled in by plans 02 and 03):
  1. Quick Start
  2. Environment Setup
  3. Running Tests
  4. Architecture Overview
  5. Backend Architecture
  6. Frontend Architecture
  7. Database and Schema
  8. API Reference
  9. Code Standards
  10. Contributing

**Quick Start section (~50 lines):**
A condensed 10-command developer setup that gets the app running. NOT a copy of the ops guide -- this is the "I want to code in 10 minutes" version:

```bash
# 1. Clone and enter project
git clone <repo-url> && cd lineage

# 2. Python environment
python3 -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt

# 3. Configure environment
cp .env.example .env
# Edit .env with Teradata credentials (TERADATA_HOST, TERADATA_USER, TERADATA_PASSWORD)

# 4. Database setup
cd database
python scripts/setup/setup_lineage_schema.py --openlineage
python scripts/setup/setup_test_data.py

# 5. Populate lineage data
python scripts/populate/populate_lineage.py

# 6. Start backend
cd ../lineage-api
python python_server.py  # Runs on :8080

# 7. Start frontend (new terminal)
cd lineage-ui
npm install
npm run dev  # Runs on :3000, proxies API to :8080
```

Then a note: "For detailed configuration, QVCI setup, and production deployment, see the [Operations Guide](operations_guide.md)."

**Environment Setup section (~80 lines):**
This section references the ops guide for detailed procedures but adds dev-specific information.

Subsections:
- **Prerequisites**: "See [Operations Guide > Prerequisites](operations_guide.md#prerequisites) for required software versions." Then add a brief table reiterating just: Python 3.9+, Node.js 18+, Go 1.23+ (optional), Redis 6+ (optional).
- **Python Setup**: Brief `python3 -m venv .venv` + `pip install -r requirements.txt`. Note the 6 packages (teradatasql, flask, flask-cors, python-dotenv, colorama, tabulate).
- **Node.js Setup**: `cd lineage-ui && npm install`. Note dev dependencies include Vitest, Playwright, ESLint.
- **Configuration**: Reference ops guide for full env var reference. Add dev-specific notes:
  - Vite dev server proxies `/api/*` to `http://localhost:8080` (configured in `vite.config.ts`) so no CORS configuration needed in development
  - Redis is optional -- skip it for local development; the application falls back gracefully
  - The frontend runs on `:3000` (dev mode) with hot module replacement
  - Playwright auto-starts the frontend on `:5173` via its webServer config (different port from `npm run dev`)
- **Database Setup**: "See [Operations Guide > Database Setup](operations_guide.md#database-setup) for QVCI verification, schema creation, and lineage population." Add a brief note about the two population modes: `--fixtures` (default, for demo/testing) and `--dbql` (extracts from query logs).
  </action>
  <verify>File exists at docs/developer_manual.md. TOC has all 10 sections. Quick Start has the 7-step setup. Environment Setup references operations_guide.md at least 3 times. Dev-specific notes about Vite proxy, Redis optional, and Playwright port are present.</verify>
  <done>developer_manual.md exists with header, TOC, Quick Start, and Environment Setup sections. Ops guide is referenced (not duplicated). Dev-specific details documented.</done>
</task>

<task type="auto">
  <name>Task 2: Write Running Tests section with all four test suites</name>
  <files>docs/developer_manual.md</files>
  <action>
Add the "## Running Tests" section to `docs/developer_manual.md` after the Environment Setup section.

Structure (~120 lines):

**Opening paragraph:** "The project has four test suites covering database, API, frontend unit, and end-to-end testing. Run all suites before submitting changes."

**Test Suite Overview table:**
| Suite | Tests | Command | Requires |
|-------|-------|---------|----------|
| Database | 73 | `cd database && python tests/run_tests.py` | Teradata connection |
| API | 20 | `cd lineage-api && python tests/run_api_tests.py` | Backend running on :8080 |
| Frontend Unit | ~558 | `cd lineage-ui && npm test` | Nothing (runs in jsdom) |
| E2E | 34 | `cd lineage-ui && npx playwright test` | Backend on :8080 |

Then detailed subsections for each:

**3.1 Database Tests (73 tests)**
- Command: `cd database && python tests/run_tests.py`
- Requires: Teradata connection (configured via .env)
- What it validates: Schema correctness, CTE lineage traversal (upstream/downstream), cycle detection, diamond patterns, fan-in/fan-out, performance benchmarks
- Test files: `tests/run_tests.py`, `tests/test_correctness.py`, `tests/test_credential_validation.py`, `tests/test_dbql_error_handling.py`
- Note: 29 tests are skipped in ClearScape Analytics environments due to DBQL/index limitations
- Expected output: "73 tests, X passed, 29 skipped" (approximate)

**3.2 API Tests (20 tests)**
- Command: `cd lineage-api && python tests/run_api_tests.py`
- Requires: Python backend running on :8080 (`python python_server.py`)
- What it validates: All REST API endpoints (v1 and v2), response shapes, error handling, search functionality
- Note: Start the backend first in a separate terminal

**3.3 Frontend Unit Tests (~558 tests)**
- Commands:
  - `cd lineage-ui && npm test` -- Watch mode (re-runs on file changes, good for development)
  - `cd lineage-ui && npx vitest --run` -- Single run (CI-style, exits after completion)
  - `cd lineage-ui && npm run test:coverage` -- With coverage report
- Requires: Nothing (runs in jsdom environment via vitest)
- What it validates: Component rendering, hook behavior, store logic, API client, graph layout, accessibility
- Config: `vitest.config.ts` (jsdom environment, setup file at `src/test/setup.ts`)
- Note: ~558 tests across 32 test files. Some tests may have known failures (accessibility tests). The count changes as tests are added.

**3.4 E2E Tests (34 tests)**
- Commands:
  - `cd lineage-ui && npx playwright test` -- Headless (default)
  - `cd lineage-ui && npx playwright test --headed` -- With visible browser
  - `cd lineage-ui && npx playwright test --ui` -- Interactive UI mode
- Requires: Python backend running on :8080. Playwright automatically starts the frontend on `:5173` via its `webServer` config (you do NOT need to run `npm run dev` separately)
- What it validates: Full user workflows -- asset browsing, lineage graph navigation, search, detail panel interaction
- Test file: `e2e/lineage.spec.ts` (single file with 34 tests)
- Config: `playwright.config.ts` (Chromium only, baseURL `:5173`)
- First-time setup: `npx playwright install` to download browser binaries

**3.5 Go Backend Tests (optional)**
- Command: `cd lineage-api && make test`
- Runs Go unit tests with race detection and coverage
- Tests are colocated with source files (`*_test.go`)
- Note: These test the Go backend separately from the Python API tests. Most local development uses the Python backend.

**Closing guidance:** "For day-to-day development, frontend unit tests (`npm test` in watch mode) provide the fastest feedback. Run the full suite before committing."
  </action>
  <verify>The Running Tests section has all 5 subsections (Database, API, Frontend Unit, E2E, Go Backend). Each subsection has Command, Requires, and What it validates. Test counts match research: 73, 20, ~558, 34.</verify>
  <done>Running Tests section documents all four test suites plus Go backend tests with commands, requirements, expected output, and what each validates.</done>
</task>

</tasks>

<verification>
1. `docs/developer_manual.md` exists and is well-formed markdown
2. TOC lists all 10 planned sections (even if some are stubs for plans 02/03)
3. Quick Start section has a complete 7-step setup workflow
4. Environment Setup references operations_guide.md (not duplicating it)
5. Dev-specific details present: Vite proxy (:8080), Redis optional, Playwright :5173, hot reload
6. Running Tests section covers all 4 suites + Go backend tests
7. Each test suite has: command, prerequisites, what it validates, test count
8. No duplication of operations guide content beyond brief references
</verification>

<success_criteria>
A new developer reading this file can:
1. Follow the Quick Start to get the application running
2. Know where to find detailed setup instructions (ops guide)
3. Understand dev-specific configuration (proxy, ports, optional services)
4. Run all test suites with the correct commands
5. Understand what each test suite validates and its prerequisites
</success_criteria>

<output>
After completion, create `.planning/phases/27-developer-manual/27-01-SUMMARY.md`
</output>
