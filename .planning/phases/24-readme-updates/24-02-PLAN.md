---
phase: 24-readme-updates
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - lineage-api/README.md
  - lineage-ui/README.md
  - database/README.md
autonomous: true

must_haves:
  truths:
    - "Someone navigating to lineage-api/ sees a README describing the hexagonal architecture and how to run both Go and Python servers"
    - "Someone navigating to lineage-ui/ sees a README describing the React component structure including DetailPanel, Toolbar, and LineageTableView"
    - "Someone navigating to database/ sees a README with a clear Testing section listing 73 tests and the exact run command"
    - "Each component README stands alone -- it states what the component is and links back to root for project context"
  artifacts:
    - path: "lineage-api/README.md"
      provides: "Backend documentation with architecture, commands, and API endpoints"
      min_lines: 80
      contains: "Hexagonal"
    - path: "lineage-ui/README.md"
      provides: "Frontend documentation with component structure, commands, and tech stack"
      min_lines: 80
      contains: "DetailPanel"
    - path: "database/README.md"
      provides: "Database documentation with schema, population, and testing section"
      contains: "73 tests"
  key_links:
    - from: "lineage-api/README.md"
      to: "README.md"
      via: "markdown link back to root"
      pattern: "\\[.*\\]\\(\\.\\./README\\.md\\)"
    - from: "lineage-ui/README.md"
      to: "README.md"
      via: "markdown link back to root"
      pattern: "\\[.*\\]\\(\\.\\./README\\.md\\)"
    - from: "database/README.md"
      to: "README.md"
      via: "markdown link back to root"
      pattern: "\\[.*\\]\\(\\.\\./README\\.md\\)"
---

<objective>
Create lineage-api/README.md and lineage-ui/README.md from scratch, and update database/README.md with a dedicated Testing section. After this plan, all three component directories have self-contained READMEs.

Purpose: Component READMEs let someone navigating directly to a subdirectory (via GitHub, file browser, or IDE) understand what the component does and how to work with it without reading the root README first.

Output: Three files -- two new (lineage-api/README.md, lineage-ui/README.md), one updated (database/README.md).
</objective>

<execution_context>
@/Users/Daniel.Tehan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/Daniel.Tehan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-readme-updates/24-RESEARCH.md
@CLAUDE.md
@database/README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create lineage-api/README.md</name>
  <files>lineage-api/README.md</files>
  <action>
  Create lineage-api/README.md from scratch. This is the backend component README. Use the verified content from RESEARCH.md as the source of truth.

  **Section 1: Title and Overview**
  - Title: "Lineage API"
  - Brief description: Go backend for the Teradata column lineage application, following hexagonal (clean) architecture. Also includes an alternative Python Flask server for development/testing.
  - Link back to root: "Part of [Teradata Column Lineage](../README.md)"

  **Section 2: Architecture (Hexagonal/Clean)**
  - Use the directory tree from RESEARCH.md (lines 163-196) exactly as verified
  - Brief explanation of the three layers:
    - **Domain** (`internal/domain/`): Core business entities (Asset, LineageNode, Column) and repository interfaces. No external dependencies.
    - **Application** (`internal/application/`): Use cases and DTOs. Orchestrates domain objects. Services: asset, lineage, openlineage, search.
    - **Adapters** (`internal/adapter/`): External integrations. Inbound: HTTP handlers with Chi router. Outbound: Teradata repository, Redis cache.
  - Also mention `internal/infrastructure/` for config (Viper) and logging (slog)

  **Section 3: Getting Started**
  Two subsections:

  **Go Server:**
  ```bash
  # Build and run
  make build && ./bin/server  # Runs on :8080

  # Or run directly
  go run cmd/server/main.go
  ```

  **Python Server (development/testing):**
  ```bash
  # Activate virtual environment (from project root)
  source ../.venv/bin/activate

  # Run Flask server
  python python_server.py  # Runs on :8080
  ```

  Prerequisites note: "Requires either Go 1.23+ or Python 3.x with Flask. See root README for full setup."

  **Section 4: Available Commands (from Makefile)**
  Table format:
  | Command | Description |
  | `make build` | Build Go binary to ./bin/server |
  | `make run` | Build and run |
  | `make test` | Run Go tests |
  | `make lint` | Run golangci-lint |
  | `make clean` | Remove build artifacts |

  **Section 5: API Endpoints**
  Use the verified endpoint tables from RESEARCH.md (lines 199-226) exactly. Include both v1 (Legacy) and v2 (OpenLineage-aligned) sections.

  **Section 6: Testing**
  ```bash
  # Go tests
  make test

  # Python API tests (20 tests)
  python tests/run_api_tests.py
  ```

  **Section 7: Configuration**
  Brief note: "Configuration via environment variables or .env file. See root README for full variable list."
  List the key backend-relevant ones: TERADATA_HOST, TERADATA_USER, TERADATA_PASSWORD, TERADATA_DATABASE, API_PORT, REDIS_ADDR, REDIS_PASSWORD, REDIS_DB.

  **Section 8: Technology Stack**
  Table:
  | Technology | Version | Purpose |
  | Go | 1.23 | Language |
  | Chi | v5.0.11 | HTTP router |
  | Viper | v1.21.0 | Configuration |
  | go-redis | v9.4.0 | Cache client |
  | sqlx | v1.3.5 | SQL toolkit |
  | slog | stdlib | Structured logging |
  | Flask | 3.0+ | Alternative Python server |

  **DO NOT:**
  - Duplicate the full quick start from root README
  - Include frontend-specific information
  - Use emojis
  </action>
  <verify>
  1. `test -f lineage-api/README.md` succeeds (file exists)
  2. `wc -l lineage-api/README.md` shows 80+ lines
  3. `grep "Hexagonal" lineage-api/README.md` finds architecture reference
  4. `grep "python_server.py" lineage-api/README.md` finds Python server command
  5. `grep "go run" lineage-api/README.md` finds Go server command
  6. `grep "../README.md" lineage-api/README.md` finds back-link to root
  7. `grep "/api/v2/openlineage" lineage-api/README.md` finds v2 endpoints
  8. `grep "make build" lineage-api/README.md` finds build command
  </verify>
  <done>
  lineage-api/README.md exists with hexagonal architecture description, directory tree, Go and Python server commands, Makefile commands, v1 and v2 API endpoint tables, testing section, configuration, and technology stack. Links back to root README. Satisfies README-04, README-05.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create lineage-ui/README.md and update database/README.md</name>
  <files>lineage-ui/README.md, database/README.md</files>
  <action>
  **Part A: Create lineage-ui/README.md from scratch.**

  **Section 1: Title and Overview**
  - Title: "Lineage UI"
  - Brief description: React 18 frontend for the Teradata column lineage application. Interactive graph visualization with detail panels, asset browsing, search, and impact analysis.
  - Link back to root: "Part of [Teradata Column Lineage](../README.md)"

  **Section 2: Component Structure**
  Use the verified directory tree from RESEARCH.md (lines 230-297) exactly. This is the comprehensive `src/` tree showing all components including v4.0 additions (DetailPanel/, Toolbar.tsx, LineageTableView/, hooks/).

  **Section 3: Getting Started**
  ```bash
  # Install dependencies
  npm install

  # Start dev server (with hot reload)
  npm run dev  # Runs on :3000

  # Production build
  npm run build

  # Preview production build
  npm run preview
  ```

  Prerequisites note: "Requires Node.js 18+ and npm. The frontend proxies /api/* requests to http://localhost:8080 (backend must be running)."

  **Section 4: Available Commands**
  Table sourced from package.json scripts:
  | Command | Description |
  | `npm run dev` | Start Vite dev server on :3000 |
  | `npm run build` | TypeScript check + Vite production build |
  | `npm run preview` | Preview production build locally |
  | `npm test` | Run Vitest unit tests |
  | `npm run test:watch` | Run tests in watch mode |
  | `npm run test:coverage` | Run tests with coverage report |
  | `npx playwright test` | Run E2E tests |
  | `npm run lint` | Run ESLint |

  **Section 5: Testing**
  Two subsections:

  **Unit Tests (Vitest):**
  - 500+ tests across 36 test files
  - `npm test` to run, `npm run test:coverage` for coverage
  - Tests cover: components, hooks, stores, API layer, graph utilities

  **E2E Tests (Playwright):**
  - 34 tests in `e2e/lineage.spec.ts`
  - `npx playwright test` to run
  - Tests cover: navigation flows, graph interactions, search, asset browsing

  **Section 6: Key Technologies**
  Table:
  | Technology | Version | Purpose |
  | React | 18.2 | UI framework |
  | TypeScript | 5.3 | Type safety |
  | Vite | 5.0 | Build tool |
  | @xyflow/react | 12.0 | Graph visualization |
  | ELKjs | 0.9 | Graph layout engine |
  | TanStack Query | 5.17 | Server state management |
  | Zustand | 4.4 | Client state management |
  | Tailwind CSS | 3.4 | Utility-first CSS |
  | prism-react-renderer | 2.4 | Syntax highlighting (DDL tab) |
  | lucide-react | 0.300 | Icon library |
  | Vitest | 1.1 | Unit test framework |
  | Playwright | 1.57 | E2E test framework |

  **Section 7: State Management**
  Brief description of the two Zustand stores:
  - `useLineageStore`: Graph state -- selected node, depth, direction, highlighted paths
  - `useUIStore`: UI state -- sidebar visibility, panel open/close, active tab

  And TanStack Query for server state (API data fetching, caching, background refetch).

  **Section 8: Configuration**
  Note the Vite proxy configuration: `/api/*` requests are proxied to `http://localhost:8080` during development. This is configured in `vite.config.ts`.

  **DO NOT:**
  - Duplicate full quick start from root README
  - Include backend-specific information
  - Use emojis

  ---

  **Part B: Update database/README.md**

  Read the existing database/README.md first. It is already comprehensive (190 lines). Make TWO targeted additions:

  1. **Add a "Testing" section** after the "Usage" section (before "Configuration"). Content:

  ```markdown
  ## Testing

  The database test suite includes 73 tests covering schema validation, CTE correctness, credential handling, and DBQL error handling.

  ```bash
  # Run all database tests
  cd database
  python tests/run_tests.py
  ```

  | Test File | Focus | Count |
  |-----------|-------|-------|
  | `tests/run_tests.py` | Schema and CTE tests | ~40 |
  | `tests/test_correctness.py` | CTE correctness validation | ~16 |
  | `tests/test_credential_validation.py` | Credential validation | ~6 |
  | `tests/test_dbql_error_handling.py` | DBQL error handling | ~11 |

  **Note:** 29 tests are skipped in ClearScape Analytics environments due to DBQL/index limitations.
  ```

  2. **Add a back-link to root README** at the top, after the title: "Part of [Teradata Column Lineage](../README.md)"

  Do NOT rewrite or restructure the existing content. The database README is 90% complete. Only add the Testing section and the back-link.
  </action>
  <verify>
  1. `test -f lineage-ui/README.md` succeeds (file exists)
  2. `wc -l lineage-ui/README.md` shows 80+ lines
  3. `grep "DetailPanel" lineage-ui/README.md` finds v4.0 component
  4. `grep "Toolbar" lineage-ui/README.md` finds v4.0 component
  5. `grep "LineageTableView" lineage-ui/README.md` finds v4.0 component
  6. `grep "npm run dev" lineage-ui/README.md` finds dev command
  7. `grep "npm run build" lineage-ui/README.md` finds build command
  8. `grep "npm test" lineage-ui/README.md` finds test command
  9. `grep "../README.md" lineage-ui/README.md` finds back-link to root
  10. `grep "73 tests" database/README.md` finds test count in database README
  11. `grep "run_tests.py" database/README.md` finds test command in database README
  12. `grep "../README.md" database/README.md` finds back-link to root in database README
  </verify>
  <done>
  lineage-ui/README.md exists with full component structure tree (including DetailPanel, Toolbar, LineageTableView), dev/build/test commands, technology stack, state management overview, and Vite proxy config. database/README.md updated with dedicated Testing section (73 tests, run command, test file breakdown) and back-link to root. All three component READMEs link back to root. Satisfies README-06, README-07, README-08, README-09, README-10.
  </done>
</task>

</tasks>

<verification>
- lineage-api/README.md describes hexagonal architecture with domain/application/adapter layers (README-04)
- lineage-api/README.md has working Go and Python server commands (README-05)
- lineage-ui/README.md documents React component structure including v4.0 components (README-06)
- lineage-ui/README.md has working dev/build/test commands (README-07)
- database/README.md documents OL_* schema and OpenLineage alignment (README-08, already present)
- database/README.md explains fixtures vs DBQL population modes (README-09, already present)
- database/README.md has dedicated Testing section with run command (README-10)
- All component READMEs stand alone with back-links to root
</verification>

<success_criteria>
1. lineage-api/README.md exists with 80+ lines, contains "Hexagonal", lists both Go and Python commands
2. lineage-ui/README.md exists with 80+ lines, contains "DetailPanel", "Toolbar", "LineageTableView"
3. database/README.md contains "73 tests" and "run_tests.py" in a dedicated Testing section
4. All three component READMEs contain a link to "../README.md"
5. lineage-ui/README.md lists npm run dev, npm run build, npm test commands
6. lineage-api/README.md lists v1 and v2 API endpoint tables
</success_criteria>

<output>
After completion, create `.planning/phases/24-readme-updates/24-02-SUMMARY.md`
</output>
