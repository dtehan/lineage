---
phase: 25-user-guide-refresh
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/user_guide.md
autonomous: true

must_haves:
  truths:
    - "User guide documents the asset browser browsing workflow (expand databases, tables, columns) without mentioning non-existent pagination controls"
    - "User guide documents all graph toolbar controls including depth slider, direction dropdown, fit-to-selection, and view mode toggle"
    - "User guide documents the loading progress bar with its 3 visible stages (Loading data, Calculating layout, Rendering graph) and timing information"
    - "User guide documents the detail panel with its 3 tabs: Columns (with clickable column names), Statistics (row count, size, owner, dates), and DDL (syntax-highlighted SQL)"
    - "User guide documents search with grouped results (Databases, Tables sections) and expandable result items"
  artifacts:
    - path: "docs/user_guide.md"
      provides: "Complete user guide covering all USER-01 through USER-10 requirements"
      contains: "Loading Progress"
  key_links:
    - from: "docs/user_guide.md"
      to: "User-facing features in lineage-ui"
      via: "Feature descriptions matching actual component behavior"
      pattern: "fit.to.selection|Loading Progress|Statistics|DDL"
---

<objective>
Update the existing user guide to document all current user-facing features (USER-01 through USER-10).

Purpose: Someone reading the user guide can learn every feature of the application without external help. The guide must accurately reflect what is actually implemented in the codebase, not aspirational features.

Output: Updated `docs/user_guide.md` with new/revised sections covering pagination status, graph controls, loading progress, detail panel tabs, and search.
</objective>

<execution_context>
@/Users/Daniel.Tehan/.claude/get-shit-done/workflows/execute-plan.md
@/Users/Daniel.Tehan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/25-user-guide-refresh/25-RESEARCH.md
@docs/user_guide.md

Key findings from research:
- AssetBrowser does NOT have pagination controls (tests exist but component doesn't implement them). The "Load More" pagination exists only in AllDatabasesLineageGraph.
- USER-01/USER-02: Document the browsing workflow as-is. The "Loading More Tables" section already documents page sizes (10, 20, 50) for database-level view. Clarify that this is database-level lineage pagination, not asset browser pagination.
- USER-03: Toolbar controls section exists but needs fit-to-selection added and accuracy review.
- USER-04: Loading progress is NOT documented. Add new section describing 3 user-visible stages with timing info.
- USER-05: Fit-to-selection is NOT documented. Add to toolbar controls section.
- USER-06/07/08: Detail panel section exists but only documents column/edge details. Needs complete rewrite to cover 3-tab interface.
- USER-09: Click-to-navigate from column list is NOT documented. Add to Columns tab description.
- USER-10: Search section exists but uses old API examples. Update to reflect current behavior (grouped results, expandable items).
- Edge colors: The app uses DIRECT/DERIVED/AGGREGATED/JOINED/CALCULATION plus AGGREGATION. Current guide table is accurate.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Asset Browser, Loading Progress, and Toolbar sections</name>
  <files>docs/user_guide.md</files>
  <action>
Update these sections of `docs/user_guide.md`:

**1. Asset Browser section (~line 308):**
- Keep the current browsing workflow documentation as-is (it accurately describes expand/click interactions)
- Do NOT add pagination controls to the Asset Browser -- they do not exist in the component
- Ensure the "Loading More Tables" section (~line 639) clearly states this is for the **database-level lineage view** (when you click a database name), not the asset browser sidebar

**2. Add new "Loading Progress" section** after the "Toolbar Controls" section (~line 419):
Add a new ### section documenting the staged loading progress bar that appears during graph rendering:

```markdown
### Loading Progress

When loading a lineage graph, a progress bar appears showing the current stage of processing:

| Stage | Progress | Message |
|-------|----------|---------|
| Fetching | 15-30% | "Loading data..." |
| Layout | 30-70% | "Calculating layout..." |
| Rendering | 70-95% | "Rendering graph..." |

For larger graphs, timing information is displayed alongside the progress bar:
- **Elapsed time**: How long the current operation has been running (e.g., "5s", "1m 30s")
- **Estimated time remaining**: Approximate time until completion (e.g., "~10s")

The progress bar appears automatically when loading lineage data and disappears when the graph is fully rendered.
```

**3. Update Toolbar Controls section (~line 407):**
Add "Fit to Selection" to the toolbar controls table:

| **Fit to Selection** | Center the viewport on the highlighted lineage path (only active when a column is selected) |

Also update the "Fit View Button" description to distinguish it from Fit to Selection:
- Fit View: Fits ALL nodes within the viewport
- Fit to Selection: Centers on only the highlighted lineage path (Crosshair icon)

Update the keyboard shortcuts table to note that fit-to-selection is triggered via the toolbar button (no keyboard shortcut).
  </action>
  <verify>
Read `docs/user_guide.md` and confirm:
1. "Loading Progress" section exists with the 3-stage table
2. "Fit to Selection" appears in the Toolbar Controls table
3. Asset Browser section does NOT mention pagination controls
4. "Loading More Tables" section references database-level lineage view
  </verify>
  <done>
User guide has accurate Loading Progress section, updated Toolbar Controls with fit-to-selection, and correctly describes Asset Browser without non-existent pagination controls.
  </done>
</task>

<task type="auto">
  <name>Task 2: Rewrite Detail Panel section and update Search section</name>
  <files>docs/user_guide.md</files>
  <action>
Update these sections of `docs/user_guide.md`:

**1. Rewrite the Detail Panel section (~line 430-461):**
Replace the current Detail Panel content with a comprehensive description of the 3-tab interface. Keep the opening paragraph about the slide-in panel and Escape to close. Then document:

**Columns Tab (LayoutList icon):**
- Lists all columns in the selected table
- Each column shows: name, data type, nullable badge (if applicable), primary key badge (if applicable)
- Lineage indicators show upstream/downstream connection counts per column
- **Click any column name to navigate directly to that column's lineage graph** (USER-09)
- This provides a quick way to explore lineage for related columns without using the asset browser

**Statistics Tab (BarChart3 icon):**
- Shows table-level metadata including:
  - Type (Table, View, Materialized View)
  - Owner
  - Created date
  - Last Modified date
  - Row Count (for tables)
  - Size (for tables only, not views)
  - Comment (if available)

**DDL Tab (Code icon):**
- For views: displays the View SQL definition
- For tables: displays the CREATE TABLE DDL
- Syntax highlighting with dark theme for readability
- Line numbers for reference
- Copy button to copy the full DDL to clipboard
- Long definitions (over 12,500 characters) show a truncation warning

Keep the Edge/Connection Details subsection that describes what happens when clicking an edge.

**2. Update Search section (~line 539):**
Update the Search section to reflect actual current behavior:
- Results are grouped into "Databases" and "Tables" sections
- Each result is expandable to show child items (tables for databases, fields/columns for datasets)
- Minimum 2 characters to trigger search
- URL persists query as `?q=...`
- Keep the existing search parameters documentation but simplify since the UI does not expose all parameters directly

Remove or update the "Result Cards" ASCII art section to match the actual grouped/expandable result format instead of individual cards.
  </action>
  <verify>
Read `docs/user_guide.md` and confirm:
1. Detail Panel section has three tab subsections (Columns, Statistics, DDL)
2. Columns tab mentions clicking column names to navigate to lineage
3. Statistics tab lists row count, size, owner, created/modified dates
4. DDL tab mentions syntax highlighting, copy button, line numbers
5. Search section mentions grouped results (Databases, Tables) and expandable items
  </verify>
  <done>
Detail panel fully documents 3-tab interface with click-to-navigate columns, and search section accurately reflects grouped/expandable results. All USER-01 through USER-10 requirements are addressed in the guide.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Read the full updated user_guide.md and verify no broken markdown formatting
2. Verify every USER requirement has corresponding documentation:
   - USER-01: Asset browser navigation workflow documented (browsing, not pagination)
   - USER-02: Page sizes documented in "Loading More Tables" for database-level view
   - USER-03: Depth/direction controls in Toolbar Controls section
   - USER-04: Loading Progress section with 3 stages
   - USER-05: Fit to Selection in Toolbar Controls
   - USER-06: Detail panel 3-tab interface documented
   - USER-07: Statistics tab with row count, size, owner, dates
   - USER-08: DDL tab with syntax highlighting, copy button
   - USER-09: Click column name to navigate to lineage
   - USER-10: Search with grouped results and expandable items
3. Verify no documentation of non-existent features (especially AssetBrowser pagination controls)
</verification>

<success_criteria>
- docs/user_guide.md updated with all USER-01 through USER-10 content
- Loading Progress section exists with 3-stage table
- Fit to Selection documented in Toolbar Controls
- Detail Panel has 3 tab subsections (Columns, Statistics, DDL)
- Search section reflects grouped/expandable results
- No references to non-existent AssetBrowser pagination controls
</success_criteria>

<output>
After completion, create `.planning/phases/25-user-guide-refresh/25-01-SUMMARY.md`
</output>
